<div class="form-group">
  <label class="mb-1">{{ label }}</label>

  {% with id=widget.attrs.id %}
    <ul class="list-unstyled mb-0"{% if id %} id="{{ id }}"{% endif %}>
      {% for group, options, index in widget.optgroups %}
        {% if group %}
          <li>{{ group }}<ul class="list-unstyled mb-0"{% if id %} id="{{ id }}_{{ index }}"{% endif %}>
        {% endif %}

        {% for option in options %}
          <li>
            <div class="custom-control custom-checkbox">
              {% include "django/forms/widgets/input.html" with widget=option %}
              <label class="custom-control-label" for="{{ option.attrs.id }}">{{ option.label }}</label>
            </div>
          </li>
        {% endfor %}

        {% if group %}
          </ul></li>
        {% endif %}
      {% endfor %}
    </ul>
  {% endwith %}

  {% include "paper_forms/bootstrap4/_errors.html" %}
  {% include "paper_forms/bootstrap4/_help_text.html" %}
</div>
